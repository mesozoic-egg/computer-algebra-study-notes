# Section 3.1

## Number representation

An $l$ digit base $b$ number is annotated as:

$$N = \pm(d_{l-1} ...d_1d_0)_b$$

For example, let's look at decimal number 5305. It has 4 digits, so l is 4. The
base is 10, so b is 10, and the number is represented as:

$$ 5305_{dec} = +(5_{3}3_{2}0_{1}5_{0})_{10} $$

Let's look at a base 16 number 95A (the value is 2394 in decimal). It has
3 digits, so l is 3; base is 16, so b is 16, and the number is represented as:

$$ 95A_{hex} = +(9_{2}5_{1}A_{0})_{16} $$

## Calculating the value

The value of N is calculated as:

$$ \pm \sum_{i=0}^{l-1} d_i * b^i $$

This means, iterate from $i=0$ to $l-1$, and sum up the value of $d_i b^i$.

Note that when we calculate the value, it essentially means convert the value to decimal. 
Let's look at the decimal example to see the output matches the value itself 5305

$$ 5305_{dec} = +(5_{3}3_{2}0_{1}5_{0})_{10} $$

$$  = \sum_{i=0}^{3} d_i * 10^i  $$

$$ = 5 * 10^3 + 3 * 10^2 + 0 * 10^1 + 5 * 10^0 = 5000 + 300 + 0 + 5 = 5305 $$

Let's look at the base 16 (hexadeicmal example). The value is 95A:

$$ 95A_{hex} = +(9_{2}5_{1}A_{0})_{16} $$

$$ = \sum_{i=0}^2 d_i * 16^i $$

$$ = 9 * 16^2 + 5 * 16^1 + 10 * 16^0 $$

$$ = 9 * 256 + 5 * 16 + 10 * 1 $$

$$ = 2304 + 80 + 10 $$

$$ = 2394 $$

Let's use the actual example in Figure 3.1, where
N = 1234567890 with base b = 1000. First, the N here
is a decimal number, I want to obtain the value in
decimal 1000, unfortunately I couldn't find a way to 
do it, so I just had to guess the representation based on the number on the figure. Note that the least 
significant number is stored on the first node.

$$ 001_{3}234_{2}567_{1}890_{0} $$

Let's verify it by doing the calculation

$$ = 1 * 1000^3 + 234 * 1000^2 + 567 * 1000^1 + 890 * 1000^0 $$

$$ = 1234567890 $$


## Multiplication algorithm 3.3

[check this out](01_algorithm_3_3.py)

## Karatsuba algorithm

I found a good explanation [here](https://www.youtube.com/watch?v=JCbZayFr9RE).
There are explanations and notation on the general case of the algorithm, but
I want to use a simple example to illustrate it. Suppose we are calculating
15 * 16.

$$ 15 = 10 * 1 + 5 = 10 * a + b $$

$$ 16 = 10 * 1 + 6 = 10 * c + d $$

The naive way to calculate the multiplication goes like this:

$$ (10 * a + b) * (10 * c + d) = 100 * ac + 10 * (ad + bc) + bd $$

Notice that there are four multiplication taking place.

The karatsuba algorithm observed that $ad + bc$ can be calculated as

$$ ad + bc = (a + b) * (c + d) - ac - bd $$

So the overall calculation becomes

$$ 100 * ac + 10 * ((a + b) * (c + d) - ac - bd) + bd $$

Since ac and bd are calculated and reused, the total multiplication being
performed is now three (Note that the multiplication by 100 and 10 are not 
actual multiplication, but rather bit shifting, aka free multiplication as
they are cheap to perform).

What I have shown above is essentially the base case of the recursion which
seem to be glossed over in other full blown explanation of the algorithm.

# Section 3.2.4

## Trial quotient

Remember in long division, we are breaking the numbers into blocks and do a 
division. For example, when when we divide 4852 by 47. The first block is
48 divide 47, with the result value 1 and remainder 1. Then we do 15 divide 47, 
with result 0, and remainder 15. Then we do 152 divide 47, with result 3
and remainder 11. The final quotient is 103.

The notation goes like this, the number 4852 is denoted as $u_n...u_1u_0$, expanded
as:

$$ u_3 u_2 u_1 u_0$$

and number 47 is denoted as $v_{n-1}...v_1v_0$, expanded as:

$$ v_1 v_0 $$

and the result quotient (103) is denoted as $q_n...q_1q_0$, in our case, expanded
as;

$$ q_2q_1q_0 $$

Recall that the trial quotient formula is:

$$ q_t = min(floordiv(\frac{u_n * b + u_{n-1}}{v_{n-1}} ), b - 1) $$

When applied to the first block, where we did 48 divide 47, the number $u$ is
$u_3u_2$ where $u_3$ is digit 4, and $u_2$ is digit 8, divided by 47 ($v_1v_0$). 
And we are dealing with decimal, so $b$ is 10. Let's see how the formula applies:

$$ q_2 = min(floordiv(\frac{4 * 10 + 8}{4}), 10 - 1) = min(12, 9) = 9$$

We can see that 9 (the trial quotient at this block) is bigger than 1 (the actual quotient
at this block), this satiesfies Lemma 3.1. 

